@import "tailwindcss";

::selection {
    background-color: #47a3f3;
    color: #fefefe;
}

:root {
    --sh-class: #2d5e9d;
    --sh-identifier: #354150;
    --sh-sign: #8996a3;
    --sh-string: #007f7a;
    --sh-keyword: #e02518;
    --sh-comment: #a19595;
    --sh-jsxliterals: #6266d1;
    --sh-property: #e25a1c;
    --sh-entity: #e25a1c;

    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 215 20.2% 65.1%;

    --radius: 0.5rem;
}

html {
    min-width: 360px;
    scroll-behavior: smooth;
    color-scheme: light; /* Force light mode */
}

.prose .anchor {
    @apply absolute invisible no-underline;

    margin-left: -1em;
    padding-right: 0.5em;
    width: 80%;
    max-width: 700px;
    cursor: pointer;
}

.anchor:hover {
    @apply visible;
}

.prose a {
    @apply underline transition-all decoration-neutral-400 underline-offset-2 decoration-[0.1em];
}

.prose .anchor:after {
    @apply text-neutral-300;
    content: "#";
}

.prose *:hover > .anchor {
    @apply visible;
}

.prose pre {
    @apply bg-neutral-50 rounded-lg overflow-x-auto border border-neutral-200 py-2 px-3 text-sm;
}

.prose code {
    @apply px-1 py-0.5 rounded-lg;
}

.prose pre code {
    @apply p-0;
    border: initial;
    line-height: 1.5;
}

.prose code span {
    @apply font-medium;
}

.prose img {
    /* Don't apply styles to next/image */
    @apply m-0;
}

.prose p {
    @apply my-4 text-neutral-800;
}

.prose h1 {
    @apply text-4xl font-medium tracking-tight mt-6 mb-2;
}

.prose h2 {
    @apply text-xl font-medium tracking-tight mt-6 mb-2;
}

.prose h3 {
    @apply text-xl font-medium tracking-tight mt-6 mb-2;
}

.prose h4 {
    @apply text-lg font-medium tracking-tight mt-6 mb-2;
}

.prose strong {
    @apply font-medium;
}

.prose ul {
    @apply list-disc pl-6;
}

.prose ol {
    @apply list-decimal pl-6;
}

.prose > :first-child {
    /* Override removing top margin, causing layout shift */
    margin-top: 1.25em !important;
    margin-bottom: 1.25em !important;
}

pre::-webkit-scrollbar {
    display: none;
}

pre {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
}

/* Remove Safari input shadow on mobile */
input[type="text"],
input[type="email"] {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
}

table {
    display: block;
    max-width: fit-content;
    overflow-x: auto;
    white-space: nowrap;
}

.title {
    text-wrap: balance;
}

/* Custom definition for text-muted-foreground */
.text-muted-foreground {
    @apply text-[hsl(var(--muted-foreground))];
}

@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Watermark refraction styles */
.watermark {
    filter: saturate(0.9) contrast(1.1) brightness(1.2);
    overflow: hidden;
    /* Base background for watermark - shows when not hovering */
    background: rgba(255, 255, 255, 0.4);
    /* Apply mask to entire container so refraction shows through watermark shape */
    mask-image: url("/images/Watermark.svg");
    -webkit-mask-image: url("/images/Watermark.svg");
    mask-size: contain;
    -webkit-mask-size: contain;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
    mask-position: center;
    -webkit-mask-position: center;
}

.perspective-1000:hover .watermark {
    /* When hovering, remove base background so refraction gradients show through */
    background: transparent;
}

.watermark .refraction {
    position: absolute;
    width: 500%;
    aspect-ratio: 1 / 1;
    filter: saturate(2);
    will-change: translate, scale, filter;
    opacity: 0;
    transition: opacity 0.2s ease-out;
    pointer-events: none;
    /* Blend mode to add color to watermark rather than replace it */
    mix-blend-mode: screen;
}

/* Show refraction only when card is hovered */
.perspective-1000:hover .watermark .refraction {
    opacity: 1;
}

.watermark .refraction:first-of-type {
    /* Position gradient at cursor location */
    --gradient-x: calc(50% + var(--pointer-x, 0) * 30%);
    --gradient-y: calc(50% + var(--pointer-y, 0) * 30%);
    background: radial-gradient(
        circle at var(--gradient-x) var(--gradient-y),
        hsl(5 100% 80%),
        hsl(150 100% 60%),
        hsl(59, 100%, 52%),
        #0000 60%
    );
    /* Center the refraction layer */
    top: 50%;
    left: 50%;
    bottom: unset;
    right: unset;
    transform-origin: center;
    /* Position based on cursor */
    --translate-x: calc(var(--pointer-x, 0) * 15%);
    --translate-y: calc(var(--pointer-y, 0) * 15%);
    transform: translate(
            calc(-50% + var(--translate-x)),
            calc(-50% + var(--translate-y))
        )
        scale(0.4);
    transition: transform 0s, opacity 0.2s ease-out;
}

.watermark .refraction:nth-of-type(2) {
    /* Position gradient at cursor location with slight offset */
    --gradient-x-2: calc(50% + var(--pointer-x, 0) * 30%);
    --gradient-y-2: calc(50% + var(--pointer-y, 0) * 30%);
    background: radial-gradient(
        circle at var(--gradient-x-2) var(--gradient-y-2),
        hsl(5 100% 80%),
        hsl(196, 100%, 60%),
        hsl(94, 96%, 61%),
        #0000 60%
    );
    /* Center the refraction layer */
    top: 50%;
    left: 50%;
    bottom: unset;
    right: unset;
    transform-origin: center;
    /* Position based on cursor with different offset */
    --translate-x-2: calc(var(--pointer-x, 0) * 12%);
    --translate-y-2: calc(var(--pointer-y, 0) * 12%);
    transform: translate(
            calc(-50% + var(--translate-x-2)),
            calc(-50% + var(--translate-y-2))
        )
        scale(0.35);
    transition: transform 0s, opacity 0.2s ease-out;
}

/* Sticker text effect with white outline */
.text-sticker-shadow {
    -webkit-text-stroke: 4px white;
    text-stroke: 4px white;
    paint-order: stroke fill;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
    text-shadow: -1px -1px 0 white, 1px -1px 0 white, -1px 1px 0 white,
        1px 1px 0 white, 0 0 4px rgba(255, 255, 255, 0.8);
}
